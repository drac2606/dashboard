import{c as pe,r as ye,g as he,E as me,b as fe,d as ge,e as xe,p as Ee,N as Se,A as Pe,f as ve,h as we,S as Ie,D as Ce,i as be,j as Re,k as Ae,l as ze,m as Fe,n as _e,o as De,q as ke,t as $e,u as Oe,v as He,C as Ue,w as Ne,x as Le,y as Te,z as Me,B as Ge,F as qe,G as je,H as Be,I as Ve,J as Je,K as Ke,L as We,M as Qe,O as Xe,P as Ye,Q as b,R as Ze,T as h,a as X,U as Y,V as Z}from"./index-CQdjVVlM.js";import{n as ee,t as et,f as tt,a as nt,b as ot,s as st,F as it,g as rt,r as at,H as ct,e as C,c as dt,p as lt,d as ut}from"./index-CzznhK2Q.js";const te=(e,t)=>{const n={};for(const o in t)pt(n,e,t,o);return n},pt=(e,t,n,o)=>{if(t!==null){let i=n[o];typeof i=="function"&&(i=[,i]);const[u=yt,f=ht,x=o]=i;(typeof u=="function"&&u(t[x])||typeof u!="function"&&u)&&(e[o]=f(t[x]));return}let[s,r]=n[o];if(typeof r=="function"){let i;const u=s===void 0&&(i=r())!=null,f=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;u?e[o]=i:f&&(e[o]=r())}else{const i=s===void 0&&r!=null,u=typeof s=="function"&&!!s(r)||typeof s!="function"&&!!s;(i||u)&&(e[o]=r)}},yt=e=>e!=null,ht=e=>e,l=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(l);if(typeof e=="object"){const t={};for(const n of Object.keys(e))e[n]!=null&&(t[n]=l(e[n]));return t}return e},R=(e,t)=>pe(e,t).then(n=>{if(n.length)try{return JSON.parse(n)}catch(o){throw o?.name==="SyntaxError"&&Object.defineProperty(o,"$responseBodyText",{value:n}),o}return{}}),mt=async(e,t)=>{const n=await R(e,t);return n.message=n.message??n.Message,n},ft=(e,t)=>{const n=(r,i)=>Object.keys(r).find(u=>u.toLowerCase()===i.toLowerCase()),o=r=>{let i=r;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=n(e.headers,"x-amzn-errortype");if(s!==void 0)return o(e.headers[s]);if(t&&typeof t=="object"){const r=n(t,"code");if(r&&t[r]!==void 0)return o(t[r]);if(t.__type!==void 0)return o(t.__type)}},gt=async(e,t,n)=>({operation:he(t).operation,region:await ee(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function xt(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function I(e){return{schemeId:"smithy.api#noAuth"}}const Et=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(I());break}case"GetId":{t.push(I());break}case"GetOpenIdToken":{t.push(I());break}case"UnlinkIdentity":{t.push(I());break}default:t.push(xt(e))}return t},St=e=>{const t=ye(e);return Object.assign(t,{authSchemePreference:ee(e.authSchemePreference??[])})},Pt=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),ne={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},vt="3.848.0",wt={version:vt},oe="required",c="fn",d="argv",S="ref",M=!0,G="isSet",w="booleanEquals",E="error",m="endpoint",g="tree",A="PartitionResult",z="getAttr",P="stringEquals",q={[oe]:!1,type:"String"},j={[oe]:!0,default:!1,type:"Boolean"},B={[S]:"Endpoint"},se={[c]:w,[d]:[{[S]:"UseFIPS"},!0]},ie={[c]:w,[d]:[{[S]:"UseDualStack"},!0]},a={},v={[S]:"Region"},V={[c]:z,[d]:[{[S]:A},"supportsFIPS"]},re={[S]:A},J={[c]:w,[d]:[!0,{[c]:z,[d]:[re,"supportsDualStack"]}]},K=[se],W=[ie],Q=[v],It={parameters:{Region:q,UseDualStack:j,UseFIPS:j,Endpoint:q},rules:[{conditions:[{[c]:G,[d]:[B]}],rules:[{conditions:K,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:E},{conditions:W,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:E},{endpoint:{url:B,properties:a,headers:a},type:m}],type:g},{conditions:[{[c]:G,[d]:Q}],rules:[{conditions:[{[c]:"aws.partition",[d]:Q,assign:A}],rules:[{conditions:[se,ie],rules:[{conditions:[{[c]:w,[d]:[M,V]},J],rules:[{conditions:[{[c]:P,[d]:[v,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:a,headers:a},type:m},{conditions:[{[c]:P,[d]:[v,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:a,headers:a},type:m},{conditions:[{[c]:P,[d]:[v,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:a,headers:a},type:m},{conditions:[{[c]:P,[d]:[v,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:a,headers:a},type:m},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:m}],type:g},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:E}],type:g},{conditions:K,rules:[{conditions:[{[c]:w,[d]:[V,M]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:m}],type:g},{error:"FIPS is enabled but this partition does not support FIPS",type:E}],type:g},{conditions:W,rules:[{conditions:[J],rules:[{conditions:[{[c]:P,[d]:["aws",{[c]:z,[d]:[re,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:a,headers:a},type:m},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:m}],type:g},{error:"DualStack is enabled but this partition does not support DualStack",type:E}],type:g},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:m}],type:g}],type:g},{error:"Invalid Configuration: Missing Region",type:E}]},Ct=It,bt=new me({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Rt=(e,t={})=>bt.get(e,()=>fe(Ct,{endpointParams:e,logger:t.logger}));xe.aws=ge;const At=e=>({apiVersion:"2014-06-30",base64Decoder:e?.base64Decoder??ot,base64Encoder:e?.base64Encoder??nt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Rt,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Et,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Pe},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ve}],logger:e?.logger??new Se,serviceId:e?.serviceId??"Cognito Identity",urlParser:e?.urlParser??Ee,utf8Decoder:e?.utf8Decoder??tt,utf8Encoder:e?.utf8Encoder??et}),zt=e=>{const t=we(e),n=()=>t().then(De),o=At(e);return{...o,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??ze,credentialDefaultProvider:e?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??Ae({serviceId:o.serviceId,clientVersion:wt.version}),maxAttempts:e?.maxAttempts??Re,region:e?.region??be("Region is missing"),requestHandler:it.create(e?.requestHandler??n),retryMode:e?.retryMode??(async()=>(await n()).retryMode||Ce),sha256:e?.sha256??Ie,streamCollector:e?.streamCollector??st,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(_e)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(Fe))}},Ft=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(s){const r=t.findIndex(i=>i.schemeId===s.schemeId);r===-1?t.push(s):t.splice(r,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){o=s},credentials(){return o}}},_t=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Dt=(e,t)=>{const n=Object.assign(ke(e),$e(e),rt(e),Ft(e));return t.forEach(o=>o.configure(n)),Object.assign(e,Oe(n),He(n),at(n),_t(n))};class on extends Ue{config;constructor(...[t]){const n=zt(t||{});super(n),this.initConfig=n;const o=Pt(n),s=Ne(o),r=Le(s),i=Te(r),u=Qe(i),f=Me(u),x=St(f),le=Dt(x,t?.extensions||[]);this.config=le,this.middlewareStack.use(Ge(this.config)),this.middlewareStack.use(qe(this.config)),this.middlewareStack.use(je(this.config)),this.middlewareStack.use(Be(this.config)),this.middlewareStack.use(Ve(this.config)),this.middlewareStack.use(Je(this.config)),this.middlewareStack.use(Ke(this.config,{httpAuthSchemeParametersProvider:gt,identityProviderConfigProvider:async ue=>new Xe({"aws.auth#sigv4":ue.credentials})})),this.middlewareStack.use(We(this.config))}destroy(){super.destroy()}}class p extends Ye{constructor(t){super(t),Object.setPrototypeOf(this,p.prototype)}}class F extends p{name="InternalErrorException";$fault="server";constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),Object.setPrototypeOf(this,F.prototype)}}class _ extends p{name="InvalidParameterException";$fault="client";constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,_.prototype)}}class D extends p{name="LimitExceededException";$fault="client";constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,D.prototype)}}class k extends p{name="NotAuthorizedException";$fault="client";constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,k.prototype)}}class $ extends p{name="ResourceConflictException";$fault="client";constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,$.prototype)}}class O extends p{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,O.prototype)}}class H extends p{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,H.prototype)}}class U extends p{name="ExternalServiceException";$fault="client";constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),Object.setPrototypeOf(this,U.prototype)}}class N extends p{name="InvalidIdentityPoolConfigurationException";$fault="client";constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),Object.setPrototypeOf(this,N.prototype)}}class L extends p{name="DeveloperUserAlreadyRegisteredException";$fault="client";constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t}),Object.setPrototypeOf(this,L.prototype)}}class T extends p{name="ConcurrentModificationException";$fault="client";constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t}),Object.setPrototypeOf(this,T.prototype)}}const kt=e=>({...e,...e.Logins&&{Logins:b}}),$t=e=>({...e,...e.SecretKey&&{SecretKey:b}}),Ot=e=>({...e,...e.Credentials&&{Credentials:$t(e.Credentials)}}),Ht=e=>({...e,...e.Logins&&{Logins:b}}),Ut=async(e,t)=>{const n=de("GetCredentialsForIdentity");let o;return o=JSON.stringify(l(e)),ce(t,n,"/",void 0,o)},Nt=async(e,t)=>{const n=de("GetId");let o;return o=JSON.stringify(l(e)),ce(t,n,"/",void 0,o)},Lt=async(e,t)=>{if(e.statusCode>=300)return ae(e,t);const n=await R(e.body,t);let o={};return o=Zt(n),{$metadata:y(e),...o}},Tt=async(e,t)=>{if(e.statusCode>=300)return ae(e,t);const n=await R(e.body,t);let o={};return o=l(n),{$metadata:y(e),...o}},ae=async(e,t)=>{const n={...e,body:await mt(e.body,t)},o=ft(e,n.body);switch(o){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await jt(n);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Vt(n);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Jt(n);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Kt(n);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Wt(n);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await Xt(n);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Qt(n);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await qt(n);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Bt(n);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Gt(n);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Mt(n);default:const s=n.body;return en({output:e,parsedBody:s,errorCode:o})}},Mt=async(e,t)=>{const n=e.body,o=l(n),s=new T({$metadata:y(e),...o});return h(s,n)},Gt=async(e,t)=>{const n=e.body,o=l(n),s=new L({$metadata:y(e),...o});return h(s,n)},qt=async(e,t)=>{const n=e.body,o=l(n),s=new U({$metadata:y(e),...o});return h(s,n)},jt=async(e,t)=>{const n=e.body,o=l(n),s=new F({$metadata:y(e),...o});return h(s,n)},Bt=async(e,t)=>{const n=e.body,o=l(n),s=new N({$metadata:y(e),...o});return h(s,n)},Vt=async(e,t)=>{const n=e.body,o=l(n),s=new _({$metadata:y(e),...o});return h(s,n)},Jt=async(e,t)=>{const n=e.body,o=l(n),s=new D({$metadata:y(e),...o});return h(s,n)},Kt=async(e,t)=>{const n=e.body,o=l(n),s=new k({$metadata:y(e),...o});return h(s,n)},Wt=async(e,t)=>{const n=e.body,o=l(n),s=new $({$metadata:y(e),...o});return h(s,n)},Qt=async(e,t)=>{const n=e.body,o=l(n),s=new H({$metadata:y(e),...o});return h(s,n)},Xt=async(e,t)=>{const n=e.body,o=l(n),s=new O({$metadata:y(e),...o});return h(s,n)},Yt=(e,t)=>te(e,{AccessKeyId:C,Expiration:n=>dt(lt(ut(n))),SecretKey:C,SessionToken:C}),Zt=(e,t)=>te(e,{Credentials:n=>Yt(n),IdentityId:C}),y=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),en=Ze(p),ce=async(e,t,n,o,s)=>{const{hostname:r,protocol:i="https",port:u,path:f}=await e.endpoint(),x={protocol:i,hostname:r,port:u,method:"POST",path:f.endsWith("/")?f.slice(0,-1)+n:f+n,headers:t};return s!==void 0&&(x.body=s),new ct(x)};function de(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class sn extends X.classBuilder().ep(ne).m(function(t,n,o,s){return[Y(o,this.serialize,this.deserialize),Z(o,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(kt,Ot).ser(Ut).de(Lt).build(){}class rn extends X.classBuilder().ep(ne).m(function(t,n,o,s){return[Y(o,this.serialize,this.deserialize),Z(o,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Ht,void 0).ser(Nt).de(Tt).build(){}export{on as CognitoIdentityClient,sn as GetCredentialsForIdentityCommand,rn as GetIdCommand};
